var u=Object.defineProperty,p=Object.defineProperties;var f=Object.getOwnPropertyDescriptors;var o=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var i=(t,a,e)=>a in t?u(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,l=(t,a)=>{for(var e in a||(a={}))T.call(a,e)&&i(t,e,a[e]);if(o)for(var e of o(a))h.call(a,e)&&i(t,e,a[e]);return t},r=(t,a)=>p(t,f(a));import{n as _,p as C}from"./index.424e46e8.js";import{T as g}from"./index.52cc5595.js";import{C as v,a as y,b,d as S,c as A}from"./index.02d5f546.js";var c=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"list-common-table"},[e("t-form",{ref:"form",attrs:{data:t.formData,"label-width":80,colon:""},on:{reset:t.onReset,submit:t.onSubmit}},[e("t-row",[e("t-col",{attrs:{span:10}},[e("t-row",{attrs:{gutter:[16,16]}},[e("t-col",{attrs:{flex:1}},[e("t-form-item",{attrs:{label:"\u5408\u540C\u540D\u79F0",name:"name"}},[e("t-input",{staticClass:"form-item-content",style:{minWidth:"134px"},attrs:{type:"search",placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u540D\u79F0"},model:{value:t.formData.name,callback:function(n){t.$set(t.formData,"name",n)},expression:"formData.name"}})],1)],1),e("t-col",{attrs:{flex:1}},[e("t-form-item",{attrs:{label:"\u5408\u540C\u72B6\u6001",name:"status"}},[e("t-select",{staticClass:"form-item-content`",attrs:{options:t.CONTRACT_STATUS_OPTIONS,placeholder:"\u8BF7\u9009\u62E9\u5408\u540C\u72B6\u6001"},model:{value:t.formData.status,callback:function(n){t.$set(t.formData,"status",n)},expression:"formData.status"}})],1)],1),e("t-col",{attrs:{flex:1}},[e("t-form-item",{attrs:{label:"\u5408\u540C\u7F16\u53F7",name:"no"}},[e("t-input",{staticClass:"form-item-content",style:{minWidth:"134px"},attrs:{placeholder:"\u8BF7\u8F93\u5165\u5408\u540C\u7F16\u53F7"},model:{value:t.formData.no,callback:function(n){t.$set(t.formData,"no",n)},expression:"formData.no"}})],1)],1),e("t-col",{attrs:{flex:1}},[e("t-form-item",{attrs:{label:"\u5408\u540C\u7C7B\u578B",name:"type"}},[e("t-select",{staticClass:"form-item-content`",attrs:{options:t.CONTRACT_TYPE_OPTIONS,placeholder:"\u8BF7\u9009\u62E9\u5408\u540C\u7C7B\u578B"},model:{value:t.formData.type,callback:function(n){t.$set(t.formData,"type",n)},expression:"formData.type"}})],1)],1)],1)],1),e("t-col",{staticClass:"operation-container",attrs:{span:2}},[e("t-button",{style:{marginLeft:"8px"},attrs:{theme:"primary",type:"submit"}},[t._v(" \u67E5\u8BE2 ")]),e("t-button",{attrs:{type:"reset",variant:"base",theme:"default"}},[t._v(" \u91CD\u7F6E ")])],1)],1)],1),e("div",{staticClass:"table-container"},[e("t-table",{attrs:{data:t.data,columns:t.columns,rowKey:t.rowKey,verticalAlign:t.verticalAlign,hover:t.hover,pagination:t.pagination,loading:t.dataLoading},on:{"page-change":t.rehandlePageChange,change:t.rehandleChange},scopedSlots:t._u([{key:"status",fn:function(n){var s=n.row;return[s.status===t.CONTRACT_STATUS.FAIL?e("t-tag",{attrs:{theme:"danger",variant:"light"}},[t._v("\u5BA1\u6838\u5931\u8D25")]):t._e(),s.status===t.CONTRACT_STATUS.AUDIT_PENDING?e("t-tag",{attrs:{theme:"warning",variant:"light"}},[t._v("\u5F85\u5BA1\u6838")]):t._e(),s.status===t.CONTRACT_STATUS.EXEC_PENDING?e("t-tag",{attrs:{theme:"warning",variant:"light"}},[t._v("\u5F85\u5C65\u884C")]):t._e(),s.status===t.CONTRACT_STATUS.EXECUTING?e("t-tag",{attrs:{theme:"success",variant:"light"}},[t._v("\u5C65\u884C\u4E2D")]):t._e(),s.status===t.CONTRACT_STATUS.FINISH?e("t-tag",{attrs:{theme:"success",variant:"light"}},[t._v("\u5DF2\u5B8C\u6210")]):t._e()]}},{key:"contractType",fn:function(n){var s=n.row;return[s.contractType===t.CONTRACT_TYPES.MAIN?e("p",[t._v("\u5BA1\u6838\u5931\u8D25")]):t._e(),s.contractType===t.CONTRACT_TYPES.SUB?e("p",[t._v("\u5F85\u5BA1\u6838")]):t._e(),s.contractType===t.CONTRACT_TYPES.SUPPLEMENT?e("p",[t._v("\u5F85\u5C65\u884C")]):t._e()]}},{key:"paymentType",fn:function(n){var s=n.row;return[s.paymentType===t.CONTRACT_PAYMENT_TYPES.PAYMENT?e("p",{staticClass:"payment-col"},[t._v(" \u4ED8\u6B3E"),e("trend",{staticClass:"dashboard-item-trend",attrs:{type:"up"}})],1):t._e(),s.paymentType===t.CONTRACT_PAYMENT_TYPES.RECIPT?e("p",{staticClass:"payment-col"},[t._v(" \u6536\u6B3E"),e("trend",{staticClass:"dashboard-item-trend",attrs:{type:"down"}})],1):t._e()]}},{key:"op",fn:function(n){return[e("a",{staticClass:"t-button-link",on:{click:function(s){return t.rehandleClickOp(n)}}},[t._v("\u7BA1\u7406")]),e("a",{staticClass:"t-button-link",on:{click:function(s){return t.handleClickDelete(n)}}},[t._v("\u5220\u9664")])]}}])}),e("t-dialog",{attrs:{header:"\u786E\u8BA4\u5220\u9664\u5F53\u524D\u6240\u9009\u5408\u540C\uFF1F",body:t.confirmBody,visible:t.confirmVisible,onCancel:t.onCancel},on:{"update:visible":function(n){t.confirmVisible=n},confirm:t.onConfirmDelete}})],1)],1)},N=[];c._withStripped=!0;const x={name:"list-table",components:{Trend:g},data(){return{CONTRACT_STATUS:v,CONTRACT_STATUS_OPTIONS:y,CONTRACT_TYPES:b,CONTRACT_TYPE_OPTIONS:S,CONTRACT_PAYMENT_TYPES:A,prefix:C,formData:{name:"",no:void 0,status:void 0},data:[],dataLoading:!1,value:"frist",columns:[{title:"\u5408\u540C\u540D\u79F0",fixed:"left",minWidth:"300",align:"left",ellipsis:!0,colKey:"name"},{title:"\u5408\u540C\u72B6\u6001",colKey:"status",width:200,cell:{col:"status"}},{title:"\u5408\u540C\u7F16\u53F7",width:200,ellipsis:!0,colKey:"no"},{title:"\u5408\u540C\u7C7B\u578B",width:200,ellipsis:!0,colKey:"contractType"},{title:"\u5408\u540C\u6536\u4ED8\u7C7B\u578B",width:200,ellipsis:!0,colKey:"paymentType"},{title:"\u5408\u540C\u91D1\u989D (\u5143)",width:200,ellipsis:!0,colKey:"amount"},{align:"left",fixed:"right",width:200,colKey:"op",title:"\u64CD\u4F5C"}],rowKey:"index",tableLayout:"auto",verticalAlign:"top",bordered:!0,hover:!0,rowClassName:t=>`${t}-class`,pagination:{defaultPageSize:20,total:100,defaultCurrent:1},confirmVisible:!1,deleteIdx:-1}},computed:{confirmBody(){var t;if(this.deleteIdx>-1){const{name:a}=(t=this.data)==null?void 0:t[this.deleteIdx];return`\u5220\u9664\u540E\uFF0C${a}\u7684\u6240\u6709\u5408\u540C\u4FE1\u606F\u5C06\u88AB\u6E05\u7A7A\uFF0C\u4E14\u65E0\u6CD5\u6062\u590D`}return""}},mounted(){this.dataLoading=!0,this.$request.get("/api/get-list").then(t=>{if(t.code===0){const{list:a=[]}=t.data;this.data=a,this.pagination=r(l({},this.pagination),{total:a.length})}}).catch(t=>{console.log(t)}).finally(()=>{this.dataLoading=!1})},methods:{onReset(t){console.log(t)},onSubmit(t){console.log(t)},rehandlePageChange(t,a){console.log("\u5206\u9875\u53D8\u5316",t,a)},rehandleChange(t,a){console.log("\u7EDF\u4E00Change",t,a)},rehandleClickOp({text:t,row:a}){console.log(t,a)},handleClickDelete(t){this.deleteIdx=t.rowIndex,this.confirmVisible=!0},onConfirmDelete(){this.data.splice(this.deleteIdx,1),this.pagination.total=this.data.length,this.confirmVisible=!1,this.$message.success("\u5220\u9664\u6210\u529F"),this.resetIdx()},onCancel(){this.resetIdx()},resetIdx(){this.deleteIdx=-1}}},m={};var d=_(x,c,N,!1,O,null,null,null);function O(t){for(let a in m)this[a]=m[a]}d.options.__file="src/pages/list/components/CommonTable.vue";var D=function(){return d.exports}();export{D as C};
